{"version":3,"file":"index.js","sources":["../src/fields/componentResolver/index.js","../src/fields/array/render/chunks/add.js","../src/fields/array/render/index.js","../src/fields/array/errorMessage.js","../src/fields/chunks/label/index.js","../src/fields/array/index.js","../src/fields/single/index.js","../src/fields/index.js","../src/cache/index.js","../src/index.js"],"sourcesContent":["export default (props) => {\n  const { componentsLibraries = [() => null], item, cache } = props\n\n  if (cache) {\n    const _cached = cache.getComponent({ key: item.type })\n    if (_cached) {\n      return _cached\n    }\n  }\n\n\n  for (var i = 0; i < componentsLibraries.length; i++) {\n    const library = componentsLibraries[i]\n    if (!library) {\n      continue\n    }\n    if (typeof library !== 'function') {\n      console.log('is not function', library)\n      continue\n    }\n    const component = library(item)\n    if (component) {\n      if (cache) {\n        cache.addComponent({ component, key: item.type })\n      }\n      return component\n    }\n  }\n\n  return null\n}","import React from 'react'\n\nexport default ({ onClick, title, disabled }) => <div className={`flex justify-center my-10`}>\n  <button disabled={disabled}\n    type=\"button\"\n    onClick={onClick}>\n    {title ? title : \"Add\"}\n  </button>\n</div>\n","import React, { useState } from 'react'\nimport { Field, FastField, ErrorMessage as BaseErrorMesssage, } from 'formik'\nimport componentResolver from '../../componentResolver'\nimport Add from './chunks/add'\n\nexport default (props) => {\n  const {\n    initialValues,\n    item: {\n      id,\n      className = \"\",\n      params,\n      container,\n      add,\n      preferInitialValues,\n      isDependant = false,\n    },\n    containersProps,\n    hideErrors } = props\n\n  let _items = preferInitialValues ? initialValues[id] : (props.valuesRef.current[id] ? props.valuesRef.current[id] : null)\n  if (!_items) {\n    _items = []\n  }\n\n  const [items, setItems] = useState(_items)\n\n  const Component = componentResolver({ ...props, componentsLibraries: props.componentsLibraries, item: params })\n  if (!Component) {\n    return null\n  }\n\n  let ContainerComponent = componentResolver({\n    ...props,\n    componentsLibraries: props.componentsLibraries,\n    item: container\n  })\n\n  if (!ContainerComponent) {\n    ContainerComponent = ({ children }) => <div>{children}</div>\n  }\n\n  let AddComponent = componentResolver({\n    ...props,\n    componentsLibraries: props.componentsLibraries,\n    item: add\n  })\n\n  if (!AddComponent) {\n    AddComponent = Add\n  }\n\n  const { arrayHelpers } = props\n  const { move, swap, push, insert, unshift, pop, remove, form } = arrayHelpers\n\n  const onAdd = async () => {\n    const newItem = params.params.placeholder ? await params.params.placeholder() : null\n    const _i = [...items, newItem]\n    onValueChanged(_i)\n    push(newItem)\n  }\n\n  const onValueChanged = (value) => {\n    const { item: { id },\n      setFieldValue,\n      setFieldTouched,\n      setValues } = props\n\n    const _values = { ...props.valuesRef.current }\n    _values[id] = value\n\n    props._onValueChanged && props._onValueChanged({ id, value })\n    setItems(value)\n    //setValues(_values, false)\n\n    //TODO:\n    //setFieldValue(id, value, true)\n    // setFieldTouched(id, true, false)\n  }\n\n  const Renderer = isDependant ? Field : FastField\n\n  return <div>\n    <div className={`w-full overflow-x-scroll ${props.item.isHorizontal ? 'flex gap-2 pb-8' : ''}`}>\n      {(items && items.length > 0) && items.map((entry, index) => {\n        const itemId = `${id}.${index}`\n        return <div\n          key={index}\n          className={`form-control ${!props.item.isHorizontal ? 'mb-4' : ''}  ${className}`}>\n\n          <Renderer type={params.type} name={itemId} >\n            {({ field, form }) => {\n\n              const onRemoveRequired = () => {\n                remove(index)\n                const _i = [...props.valuesRef.current[id]]\n                _i.splice(index, 1)\n                onValueChanged(_i)\n              }\n\n              const onMoveDownRequired = () => {\n                if (items.length <= index) {\n                  return\n                }\n                swap(index, index + 1)\n\n                const _i = [...props.valuesRef.current[id]]\n                const object = _i[index]\n                const other = _i[index + 1]\n                _i[index] = other\n                _i[index + 1] = object\n                onValueChanged(_i)\n              }\n\n              const onMoveUpRequired = () => {\n                if (index === 0) {\n                  return\n                }\n                swap(index, index - 1)\n\n                const _i = [...props.valuesRef.current[id]]\n                const object = _i[index]\n                const other = _i[index - 1]\n                _i[index] = other\n                _i[index - 1] = object\n                onValueChanged(_i)\n              }\n\n              const onEntryValuesChanged = (value) => {\n                const _i = [...props.valuesRef.current[id]]\n                _i[index] = value\n                onValueChanged(_i)\n              }\n\n              const disabled = props.isSubmitting || props.disabled || (props.item && props.item.disabled)\n              const readOnly = props.readOnly || (props.props && props.props.readOnly)\n\n              const adaptedProps = { ...props }\n              adaptedProps.item = {\n                ...adaptedProps.item,\n                params: adaptedProps.item.params\n              }\n\n              const onContainerPropsChanged = (containerProps) => {\n                props.onContainerPropsChanged({ id: itemId, props: containerProps })\n              }\n\n              return <ContainerComponent\n                {...container}\n                // {...props}\n                {...props.item}\n                arrayHelpers={arrayHelpers}\n                onMoveDownRequired={onMoveDownRequired}\n                onMoveUpRequired={onMoveUpRequired}\n                onRemoveRequired={onRemoveRequired}\n                canMoveUp={props.item.canMove && (index > 0)}\n                canMoveDown={props.item.canMove && (index < (items.length - 1))}\n                canRemove={props.item.canRemove}\n                showControls={props.item.showControls}\n                index={index}\n                value={entry}\n                containerProps={containersProps[itemId]}\n                onContainerPropsChanged={onContainerPropsChanged}>\n                <Component\n                  {...adaptedProps}\n                  disabled={disabled}\n                  readOnly={readOnly}\n                  value={entry}\n                  // {...params}\n                  onValueChanged={onEntryValuesChanged} />\n              </ContainerComponent>\n            }}\n          </Renderer>\n          {!hideErrors ?\n            <BaseErrorMesssage\n              name={itemId}\n              component=\"div\"\n              className=\"text-sm text-red-600 pt-2\" />\n            : null}\n        </div>\n      })}\n    </div>\n    {(!props.disabled && props.item.canAddItems && !items.length < props.item.maxItems) &&\n      <AddComponent\n        onClick={onAdd}\n        title={add.title}\n        disabled={items.length >= props.item.maxItems} />\n    }\n  </div>\n}\n","import React from 'react'\nimport { Field, ErrorMessage as BaseErrorMesssage, getIn } from 'formik'\n\nexport default ({ name }) => (\n  <Field\n    name={name}\n    render={({ form }) => {\n      const error = getIn(form.errors, name)\n      const touch = getIn(form.touched, name)\n      return touch && error ? error : null\n    }}\n  />\n)\n","import React from 'react'\n\nexport default (props) => {\n  const { label, hideLabel } = props.item\n  if (hideLabel || !label) {\n    return null\n  }\n\n  return <div className=\"mb-2\">\n    <p className=\"\">{label}</p>\n  </div>\n}\n","import React from 'react'\nimport { FieldArray, } from 'formik'\nimport render from './render'\nimport ErrorMessage from './errorMessage'\nimport LabelRenderer from '../chunks/label'\n\nexport default (props) => {\n  const {\n    item: {\n      type,\n      id,\n      className = \"\",\n    },\n    hideErrors,\n  } = props\n\n  return <div className={`${className}`}>\n    <LabelRenderer {...props} />\n    <FieldArray\n      type={type}\n      name={id}\n      //validateOnChange\n      component={(arrayHelpers) => render({ ...props, arrayHelpers })} />\n    {/* <FieldArray\n      type={type}\n      name={id}\n      render={(arrayHelpers) => render({ ...props, arrayHelpers })} /> */}\n    {/* <FieldArray\n      type={type}\n      name={id}>\n      {(arrayHelpers) => render({ ...props, arrayHelpers })}\n    </FieldArray> */}\n    {!hideErrors ?\n      <ErrorMessage\n        name={id}\n        component=\"div\"\n        className=\"text-sm text-pink-600 pt-2\" /> : null}\n  </div>\n}","import React from 'react'\nimport { Field, ErrorMessage, FastField } from 'formik'\nimport componentResolver from '../componentResolver'\nimport { nanoid } from 'nanoid'\nimport LabelRenderer from '../chunks/label'\nimport Portal from '@mui/material/Portal'\n\n\nexport default (props) => {\n  const { item: {\n    type,\n    id,\n    isDependant = false,\n    portalContainer,\n    className = \"\" },\n    hideErrors } = props\n\n  const Component = componentResolver({ ...props, componentsLibraries: props.componentsLibraries, item: props.item })\n  if (!Component) {\n    return null\n  }\n\n  const _id = id ? id : nanoid()\n  const Renderer = isDependant ? Field : FastField\n\n  const Shell = (portalContainer)\n    ? ({ children }) => <Portal container={portalContainer.current}>{children}</Portal>\n    : ({ children }) => <div className={`mb-6 ${className}`}>{children}</div>\n\n  return <Shell>\n    <LabelRenderer {...props} />\n    <Renderer type={type} name={_id} >\n      {({ field, form }) => {\n\n        const onValueChanged = (value) => {\n          //console.log('onValueChanged', value)\n          if (!props.item.id) {\n            return\n          }\n          const { item: { id }, setFieldValue, setFieldTouched } = props\n\n          props._onValueChanged && props._onValueChanged({ id, value })\n\n          setFieldValue(id, value, true)\n          setFieldTouched(id, true, false)\n        }\n\n        const disabled = props.isSubmitting || props.disabled || (props.item && props.item.disabled)\n        const readOnly = props.readOnly || (props.props && props.props.readOnly)\n        return <div>\n          <Component\n            {...props}\n            disabled={disabled}\n            readOnly={readOnly}\n            value={props.values[id]}\n            error={props.errors[id]}\n            field={field}\n            form={form}\n            onValueChanged={onValueChanged} />\n          {(!hideErrors && id)\n            ? <div className=\"\n            my-2\n            mb-4\n            px-2\n            rounded-b-lg\">\n              <ErrorMessage\n                name={_id}\n                component=\"div\"\n                className=\"text-sm text-pink-600\" />\n            </div>\n            : null}\n        </div>\n      }}\n    </Renderer>\n  </Shell>\n}\n","import React from 'react'\nimport { Form } from 'formik'\nimport ArrayField from './array'\nimport SingleField from './single'\n\nexport default (props) => {\n  const { inputs } = props\n  const items = Array.isArray(inputs) ? inputs : inputs()\n  return <Form>\n    {\n      items.map(item => {\n        const { isMulti } = item\n        if (isMulti) {\n          return renderMultiItems({ ...props, item })\n        }\n\n        return renderItem({ ...props, item, })\n      })\n    }\n  </Form>\n}\n\nconst renderMultiItems = (props) => {\n  const { item: { className, items } } = props\n  return <div className={`#TODO -mb-2 ${className}`}>\n    {items.map(_item => renderItem({ ...props, item: _item, }))}\n  </div>\n}\n\nconst renderItem = (props) => {\n  const { item } = props\n  if (item.hide) {\n    return null\n  }\n\n  if (item.isList) {\n    return <ArrayField {...props} />\n  }\n\n  return <SingleField {...props} />\n}\n","export default class FormulaikCache {\n    _data = {}\n    _cdata = {}\n    constructor(props) {\n\n    }\n\n    get data() { return this._data }\n    set data(value) { this._data = value }\n\n    get cdata() { return this._cdata }\n    set cdata(value) { this._cdata = value }\n\n\n    add = ({ search, results, key }) => {\n        const _key = key.toLowerCase()\n        if (!this.data[_key]) {\n            this.data[_key] = {}\n        }\n        this.data[_key][search] = [...results]\n        //console.log('Formulaik cache > add >', _key, search, results)\n    }\n\n    get = ({ search, key }) => {\n        const _key = key.toLowerCase()\n        if (!this.data[_key]) {\n            //console.log('Formulaik cache > get > key is not present', _key)\n            return null\n        }\n\n        //console.log('Formulaik cache > get > key is present', _key, 'Returning', this.data[_key][search])\n        return this.data[_key][search]\n    }\n\n    clear = () => {\n        this.data = {}\n    }\n\n\n    addComponent = ({ component, key }) => {\n        const _key = key.toLowerCase()\n        this.cdata[_key] = component\n        //console.log('Formulaik cache > add >', _key, search, results)\n    }\n\n    getComponent = ({ key }) => {\n        const _key = key.toLowerCase()\n        if (!this.cdata[_key]) {\n            //console.log('Formulaik cache > get > key is not present', _key)\n            return null\n        }\n\n        //console.log('Formulaik cache > get > key is present', _key, 'Returning', this.data[_key][search])\n        return this.cdata[_key]\n    }\n}\n","import React, { useRef, useState } from 'react'\nimport { Formik } from 'formik'\nimport fields from './fields'\nimport FormulaikCache from './cache'\n\nexport default (props) => {\n  const {\n    error,\n    onFormPropsChanged,\n    disableCache = false,\n    hideErrors = false,\n    disabled = false,\n    readOnly = false,\n    children\n  } = props\n\n  //console.log(\"Solliciting formulaik\", props)\n  const initialValues = (typeof props.initialValues !== 'function') ? props.initialValues : (props.initialValues && props.initialValues())\n  const validationSchema = (typeof props.validationSchema !== 'function') ? props.validationSchema : (props.validationSchema && props.validationSchema())\n\n  const _form = useRef()\n  const valuesRef = useRef(initialValues ? initialValues : {})\n  const cache = disableCache ? null : (props.cache ? props.cache : useRef(new FormulaikCache()).current)\n\n  const containersProps = useRef({})\n\n  const onContainerPropsChanged = ({ id, props: containerProps }) => {\n    const data = {\n      ...containersProps.current,\n    }\n    data[id] = containerProps\n    containersProps.current = data\n  }\n\n  const onValuesChanged = (values) => {\n    valuesRef.current = values\n    props.onValuesChanged && props.onValuesChanged(values)\n    //console.log('onValuesChanged hook')\n  }\n\n  const onSubmit = async (values, actions) => {\n    const { setValues } = actions\n    setValues(valuesRef.current)\n    return props.onSubmit(valuesRef.current, actions)\n  }\n\n  const _onValueChanged = ({ id, value }) => {\n    const values = {\n      ...valuesRef.current,\n    }\n    values[id] = value\n    onValuesChanged(values)\n  }\n\n  return <div className=''>\n    <Formik\n      ref={_form}\n      initialValues={initialValues}\n      validationSchema={validationSchema}\n      validateOnBlur\n      validateOnChange\n      onSubmit={onSubmit}>\n      {formProps => {\n        onFormPropsChanged && onFormPropsChanged(formProps)\n        return fields({\n          ...formProps,\n          ...props,\n          initialValues,\n          validationSchema,\n          onValuesChanged,\n          _onValueChanged,\n          containersProps: containersProps.current,\n          onContainerPropsChanged,\n          values: valuesRef.current,\n          valuesRef,\n          cache,\n          disableCache,\n          disabled,\n          readOnly,\n          hideErrors\n        })\n      }}\n    </Formik>\n    {children}\n    {error &&\n      <div className=\"mt-6 text-pink-600 text-center\">\n        <label>{error.message}</label>\n      </div>}\n  </div>\n}\n"],"names":["props","componentsLibraries","item","cache","_cached","getComponent","key","type","i","length","library","console","log","component","addComponent","onClick","title","disabled","React","initialValues","id","className","params","container","add","preferInitialValues","isDependant","containersProps","hideErrors","_items","valuesRef","current","useState","items","setItems","Component","componentResolver","ContainerComponent","children","AddComponent","Add","arrayHelpers","swap","push","insert","remove","onAdd","newItem","_i","onValueChanged","placeholder","value","_values","_onValueChanged","Renderer","Field","FastField","isHorizontal","map","entry","index","itemId","onRemoveRequired","splice","onMoveDownRequired","object","other","onMoveUpRequired","onEntryValuesChanged","isSubmitting","readOnly","adaptedProps","onContainerPropsChanged","containerProps","canMove","canRemove","showControls","BaseErrorMesssage","canAddItems","maxItems","name","form","error","getIn","errors","touch","touched","label","hideLabel","FieldArray","render","portalContainer","_id","nanoid","Shell","field","setFieldValue","setFieldTouched","values","ErrorMessage","inputs","Array","isArray","Form","isMulti","renderMultiItems","renderItem","_item","hide","isList","FormulaikCache","_data","_cdata","search","results","_key","toLowerCase","data","get","clear","cdata","onFormPropsChanged","disableCache","validationSchema","_form","useRef","onValuesChanged","onSubmit","actions","setValues","Formik","formProps","fields","message"],"mappings":"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"}