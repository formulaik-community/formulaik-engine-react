{"version":3,"file":"index.modern.js","sources":["../src/fields/componentResolver/index.js","../src/fields/array/render/chunks/add.js","../src/fields/array/render/index.js","../src/fields/array/errorMessage.js","../src/fields/array/index.js","../src/fields/single/index.js","../src/fields/index.js","../src/cache/index.js","../src/index.js"],"sourcesContent":["export default (props) => {\n  const { componentsLibraries = [() => null], item } = props\n\n  for (var i = 0; i < componentsLibraries.length; i++) {\n    const library = componentsLibraries[i]\n    if (!library) {\n      continue\n    }\n    if (typeof library !== 'function') {\n      console.log('is not function', library)\n      continue\n    }\n    const component = library(item)\n    if (component) {\n      return component\n    }\n  }\n\n  return null\n}","import React from 'react'\n\nexport default ({ onClick, title, disabled }) => <div className={`flex justify-center my-10`}>\n  <button disabled={disabled}\n    type=\"button\"\n    onClick={onClick}>\n    {title ? title : \"Add\"}\n  </button>\n</div>\n","import React, { useState, useRef } from 'react'\nimport { Field, FastField, ErrorMessage as BaseErrorMesssage, } from 'formik'\nimport componentResolver from '../../componentResolver'\nimport Add from './chunks/add'\n\nexport default (props) => {\n  const {\n    values,\n    initialValues,\n    item: {\n      id,\n      className = \"\",\n      params,\n      container,\n      add,\n      preferInitialValues,\n      isDependant = false,\n    },\n\n    hideErrors } = props\n\n  //const [counter, setCounter] = useState(1)\n  const cachedValues = useRef(props.values)\n\n  // let items = values[id] ? values[id] : null\n  // if ((!items || !items.length || !items.filter(a => a).length) && (initialValues[id] && initialValues[id].length)) {\n  //   items = initialValues[id]\n  // }\n\n  let _items = preferInitialValues ? initialValues[id] : (values[id] ? values[id] : null)\n  if (!_items) {\n    _items = []\n  }\n\n  const [items, setItems] = useState(_items)\n\n  const Component = componentResolver({ componentsLibraries: props.componentsLibraries, item: params })\n  if (!Component) {\n    return null\n  }\n\n  var ContainerComponent = componentResolver({\n    componentsLibraries: props.componentsLibraries,\n    item: container\n  })\n\n  if (!ContainerComponent) {\n    ContainerComponent = ({ children }) => <div>{children}</div>\n  }\n\n  var AddComponent = componentResolver({\n    componentsLibraries: props.componentsLibraries,\n    item: add\n  })\n\n  if (!AddComponent) {\n    AddComponent = Add\n  }\n\n  const { arrayHelpers } = props\n  const { move, swap, push, insert, unshift, pop, remove, form } = arrayHelpers\n\n  const onAdd = () => {\n    onLayoutWillChange()\n    const newItem = params.params.placeholder ? params.params.placeholder() : null\n    const _i = [...items, newItem]\n    onValueChanged(_i)\n    push(newItem)\n  }\n\n  const onLayoutWillChange = () => {\n    //const { item: { id }, setFieldValue, setFieldTouched, setValues } = props\n    //setValues(_cachedValues.current)\n  }\n\n  const onValueChanged = (value) => {\n    const { item: { id },\n      setFieldValue,\n      setFieldTouched,\n      setValues } = props\n\n    const _values = { ...props.values }\n    _values[id] = value\n    cachedValues.current = { ..._values }\n    props._onValueChanged && props._onValueChanged({ id, value })\n    setItems(value)\n    //setValues(_values, false)\n\n    //TODO:\n    //setFieldValue(id, value, true)\n    // setFieldTouched(id, true, false)\n  }\n\n  const Renderer = isDependant ? Field : FastField\n\n  return <div>\n    <div className={`w-full overflow-x-scroll ${props.item.isHorizontal ? 'flex gap-2 pb-8' : ''}`}>\n      {(items && items.length > 0) && items.map((entry, index) => {\n        const itemId = `${id}.${index}`\n        return <div\n          key={index}\n          className={`form-control ${!props.item.isHorizontal ? 'mb-4' : ''}  ${className}`}>\n          {/* {\n        (label && forceLabel) &&\n        <label className=\"label\">\n          <span>{label}</span>\n        </label>\n      } */}\n\n          <Renderer type={params.type} name={itemId} >\n            {({ field, form }) => {\n\n              const onRemoveRequired = () => {\n                remove(index)\n                const _i = [...items]\n                _i.splice(index, 1)\n                onValueChanged(_i)\n                //setCounter(counter + 1)\n              }\n\n              const onMoveDownRequired = () => {\n                if (items.length <= index) {\n                  return\n                }\n                swap(index, index + 1)\n\n                const _i = [...items]\n                const object = _i[index]\n                const other = _i[index + 1]\n                _i[index] = other\n                _i[index + 1] = object\n                onValueChanged(_i)\n                //setCounter(counter + 1)\n              }\n\n              const onMoveUpRequired = () => {\n                if (index === 0) {\n                  return\n                }\n                swap(index, index - 1)\n\n                const _i = [...items]\n                const object = _i[index]\n                const other = _i[index - 1]\n                _i[index] = other\n                _i[index - 1] = object\n                onValueChanged(_i)\n                //setCounter(counter + 1)\n              }\n\n              const onEntryValuesChanged = (value) => {\n                const _i = [...items]\n                _i[index] = value\n                onValueChanged(_i)\n              }\n\n              const disabled = props.isSubmitting || props.disabled || (props.item && props.item.disabled)\n              const readOnly = props.readOnly || (props.props && props.props.readOnly)\n\n              return <ContainerComponent\n                {...container}\n                // {...props}\n                arrayHelpers={arrayHelpers}\n                onMoveDownRequired={onMoveDownRequired}\n                onMoveUpRequired={onMoveUpRequired}\n                onRemoveRequired={onRemoveRequired}\n                canMoveUp={props.item.canMove && (index > 0)}\n                canMoveDown={props.item.canMove && (index < (items.length - 1))}\n                canRemove={props.item.canRemove}\n                showControls={props.item.showControls}\n                index={index}\n                value={entry}>\n                <Component\n                  {...props}\n                  disabled={disabled}\n                  readOnly={readOnly}\n                  value={entry}\n                  {...params.params}\n                  onValueChanged={onEntryValuesChanged} />\n              </ContainerComponent>\n            }}\n          </Renderer>\n          {!hideErrors ?\n            <BaseErrorMesssage\n              name={itemId}\n              component=\"div\"\n              className=\"text-sm text-red-600 pt-2\" />\n            : null}\n        </div>\n      })}\n    </div>\n    {(!props.disabled && props.item.canAddItems && !items.length < props.item.maxItems) &&\n      <AddComponent\n        onClick={onAdd}\n        title={add.title}\n        disabled={items.length >= props.item.maxItems} />\n    }\n  </div>\n}\n","import React from 'react'\nimport { Field, ErrorMessage as BaseErrorMesssage, getIn } from 'formik'\n\nexport default ({ name }) => (\n  <Field\n    name={name}\n    render={({ form }) => {\n      const error = getIn(form.errors, name)\n      const touch = getIn(form.touched, name)\n      return touch && error ? error : null\n    }}\n  />\n)\n","import React from 'react'\nimport { FieldArray, } from 'formik'\nimport render from './render'\nimport ErrorMessage from './errorMessage'\n\nexport default (props) => {\n  const {\n    item: {\n      type,\n      id,\n      label,\n      forceLabel = false,\n      className = \"\",\n    },\n    hideErrors,\n  } = props\n\n  return <div className={`${className}`}>\n    {\n      (label && forceLabel) &&\n      <div className=\"label mb-3\">\n        <p>{label}</p>\n      </div>\n    }\n    <FieldArray\n      type={type}\n      name={id}\n      //validateOnChange\n      component={(arrayHelpers) => render({ ...props, arrayHelpers })} />\n    {/* <FieldArray\n      type={type}\n      name={id}\n      render={(arrayHelpers) => render({ ...props, arrayHelpers })} /> */}\n    {/* <FieldArray\n      type={type}\n      name={id}>\n      {(arrayHelpers) => render({ ...props, arrayHelpers })}\n    </FieldArray> */}\n    {!hideErrors ?\n      <ErrorMessage\n        name={id}\n        component=\"div\"\n        className=\"text-sm text-red-600 pt-2\" /> : null}\n  </div>\n}\n","import React from 'react'\nimport { Field, ErrorMessage, FastField } from 'formik'\nimport componentResolver from '../componentResolver'\nimport { nanoid } from 'nanoid'\n\nexport default (props) => {\n  const { item: {\n    type,\n    id,\n    label,\n    isDependant = false,\n    forceLabel = false,\n    className = \"\" },\n    hideErrors } = props\n\n  const Component = componentResolver({ componentsLibraries: props.componentsLibraries, item: props.item })\n  if (!Component) {\n    return null\n  }\n\n  const _id = id ? id : nanoid()\n  const Renderer = isDependant ? Field : FastField\n\n  return <div className={`mb-6 ${className}`}>\n    {\n      (label && forceLabel) &&\n      <div className=\"label mb-3\">\n        <p>{label}</p>\n      </div>\n    }\n\n    <Renderer type={type} name={_id} >\n      {({ field, form }) => {\n\n        const onValueChanged = (value) => {\n          console.log('onValueChanged', value)\n          if (!props.item.id) {\n            return\n          }\n          const { item: { id }, setFieldValue, setFieldTouched } = props\n\n          props._onValueChanged && props._onValueChanged({ id, value })\n\n          setFieldValue(id, value, true)\n          setFieldTouched(id, true, false)\n        }\n\n        const disabled = props.isSubmitting || props.disabled || (props.item && props.item.disabled)\n        const readOnly = props.readOnly || (props.props && props.props.readOnly)\n        return <div>\n          <Component\n            {...props}\n            disabled={disabled}\n            readOnly={readOnly}\n            value={props.values[id]}\n            error={props.errors[id]}\n            field={field}\n            form={form}\n            onValueChanged={onValueChanged} />\n          {(!hideErrors && id)\n            ? <div className=\"\n            my-2\n            mb-4\n            px-2\n            rounded-b-lg\">\n              <ErrorMessage\n                name={_id}\n                component=\"div\"\n                className=\"text-sm text-red-500 \" />\n            </div>\n            : null}\n        </div>\n      }}\n    </Renderer>\n  </div>\n}\n","import React from 'react'\nimport { Form } from 'formik'\nimport ArrayField from './array'\nimport SingleField from './single'\n\nexport default (props) => {\n  const { inputs } = props\n  const items = Array.isArray(inputs) ? inputs : inputs()\n  return <Form>\n    {\n      items.map(item => {\n        const { isMulti } = item\n        if (isMulti) {\n          return renderMultiItems({ ...props, item })\n        }\n\n        return renderItem({ ...props, item, })\n      })\n    }\n  </Form>\n}\n\nconst renderMultiItems = (props) => {\n  const { item: { className, items } } = props\n  return <div className={className}>\n    {items.map(_item => renderItem({ ...props, item: _item, }))}\n  </div>\n}\n\nconst renderItem = (props) => {\n  const { item } = props\n  if (item.hide) {\n    return null\n  }\n\n  if (item.isList) {\n    return <ArrayField {...props} />\n  }\n\n  return <SingleField {...props} />\n}\n","export default class FormulaikCache {\n    _data = {}\n    constructor(props) {\n\n    }\n\n    get data() { return this._data }\n    set data(value) { this._data = value }\n\n    add = ({ search, results, key }) => {\n        const _key = key.toLowerCase()\n        if (!this.data[_key]) {\n            this.data[_key] = {}\n        }\n        this.data[_key][search] = [...results]\n        //console.log('Formulaik cache > add >', _key, search, results)\n    }\n\n    get = ({ search, key }) => {\n        const _key = key.toLowerCase()\n        if (!this.data[_key]) {\n            //console.log('Formulaik cache > get > key is not present', _key)\n            return null\n        }\n\n        //console.log('Formulaik cache > get > key is present', _key, 'Returning', this.data[_key][search])\n        return this.data[_key][search]\n    }\n\n    clear = () => {\n        this.data = {}\n    }\n}\n","import React, { useRef, } from 'react'\nimport { Formik } from 'formik'\nimport generate from './fields'\nimport FormulaikCache from './cache'\n\nexport default (props) => {\n  const {\n    error,\n    onFormPropsChanged,\n    disableCache = false,\n    hideErrors = false,\n    disabled = false,\n    readOnly = false\n  } = props\n\n  console.log(\"Solliciting formulaik\", props)\n  const initialValues = (typeof props.initialValues !== 'function') ? props.initialValues : (props.initialValues && props.initialValues())\n  const validationSchema = (typeof props.validationSchema !== 'function') ? props.validationSchema : (props.validationSchema && props.validationSchema())\n\n  const _form = useRef()\n  const changedValues = useRef(initialValues)\n  const cache = disableCache ? null : (props.cache ? props.cache : useRef(new FormulaikCache()).current)\n\n  const onValuesChanged = (values) => {\n    changedValues.current = values\n    props.onValuesChanged && props.onValuesChanged(values)\n    console.log('onValuesChanged hook')\n  }\n\n  const onSubmit = async (values, actions) => {\n    const { setValues } = actions\n    setValues(changedValues.current)\n    return props.onSubmit(changedValues.current, actions)\n  }\n\n  const _onValueChanged = ({ id, value }) => {\n    const values = {\n      ...changedValues.current,\n    }\n    values[id] = value\n    onValuesChanged(values)\n  }\n\n  return <div className=''>\n    <Formik\n      ref={_form}\n      initialValues={initialValues}\n      validationSchema={validationSchema}\n      validateOnBlur\n      validateOnChange\n      onSubmit={onSubmit}>\n      {formProps => {\n        onFormPropsChanged && onFormPropsChanged(formProps)\n        return generate({ ...formProps, ...props, initialValues, validationSchema, onValuesChanged, _onValueChanged, values: changedValues.current, cache, disableCache, disabled, readOnly, hideErrors })\n      }}\n    </Formik>\n    {error &&\n      <div className=\"mt-6 text-pink-600 text-center\">\n        <label>{error.message}</label>\n      </div>}\n  </div>\n}\n"],"names":["props","componentsLibraries","item","i","length","library","console","log","component","onClick","title","disabled","values","initialValues","id","className","params","container","add","preferInitialValues","isDependant","hideErrors","cachedValues","useRef","_items","useState","items","setItems","Component","componentResolver","ContainerComponent","children","AddComponent","Add","arrayHelpers","swap","push","insert","remove","onAdd","onLayoutWillChange","newItem","placeholder","_i","onValueChanged","value","_values","current","_onValueChanged","Renderer","Field","FastField","isHorizontal","map","entry","index","itemId","type","onRemoveRequired","splice","onMoveDownRequired","object","other","onMoveUpRequired","onEntryValuesChanged","isSubmitting","readOnly","canMove","canRemove","showControls","BaseErrorMesssage","canAddItems","maxItems","name","form","error","getIn","errors","touch","touched","label","forceLabel","render","_id","nanoid","field","setFieldValue","setFieldTouched","ErrorMessage","inputs","Array","isArray","isMulti","renderMultiItems","renderItem","_item","hide","isList","FormulaikCache","_data","search","results","key","_key","toLowerCase","data","get","clear","onFormPropsChanged","disableCache","validationSchema","_form","changedValues","cache","onValuesChanged","onSubmit","actions","setValues","formProps","generate","message"],"mappings":"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"}